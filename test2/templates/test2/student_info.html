<!--Load templates-->
{% include 'test2/navbar.html' %}
{% load staticfiles %}
{% now "Y" as current_year %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="{% static 'icon.png'%}" />
    <title>Point Grey Awards Database</title>
    <link rel="stylesheet" href="{% static 'css/studentinfo_style.css' %}">
</head>
<body>


{% block content %}

{% endblock %}

<!--Student Info goes here-->
<h2><strong>{{ student.last }}, {{ student.first }} ({{ student.legal }})</strong></h2>

<p style="font-size:20px"> Student #: <strong>{{ student.student_num }}</strong> | Homeroom: <strong>{{ student.homeroom }}</strong> | Sex: <strong>{{ student.sex }}</strong> | Year Entered: <strong>{{ student.date_added }}</strong></p>
<h3>CUMULATIVE TOTAL: {{ student.cumulative }}</h3>

<button onclick="submitForms()">Submit</button>


<script>
    addEventListener('keypress', function(e) {
    if (e.keyCode == 42) {
        submitForms();
    }
    if ( e.keyCode == 13 ) {
        submitForms();
    }
}, false);
</script>


<hr>
<!-- end of Student Overview-->

<form action="{% url "test2:student_submit" student.id %}" id="form0" name="col form" method="post">


{#{% if student.homeroom|slice:":2"|add:"0" >= 12 %}#}
{#    {% include 'test2/collapsible.html' with student=student grade="12" year="2018" %}#}
{#{% endif %}#}
{##}
{#{% if student.homeroom|slice:":2"|add:"0" >= 11 %}#}
{#    {% include 'test2/collapsible.html' with student=student grade="11" year="2017" %}#}
{#{% endif %}#}
{##}
{#{% if student.homeroom|slice:":2"|add:"0" >= 10 %}#}
{#    {% include 'test2/collapsible.html' with student=student grade="10" year="2016" %}#}
{#{% endif %}#}
{##}
{#{% if student.homeroom|slice:":2"|add:"0" >= 9 %}#}
{#    {% include 'test2/collapsible.html' with student=student grade="09" year="2015" %}#}
{#{% endif %}#}
{##}
{#{% if student.homeroom|slice:":2"|add:"0" >= 8 %}#}
{#    {% include 'test2/collapsible.html' with student=student grade="08" year="2014" %}#}
{#{% endif %}#}



{% for grade in student.grade_set.all reversed %}
<!--student.homeroom|slice:":2" - grade-->
    {% include 'test2/collapsible.html' with student=student grade=grade.grade|stringformat:"02d" year=current_year grade_object=grade %}
{% endfor %}

</form>

<!--Script for the Nullify button-->
<script>
function nullify() {

}
</script>

<!--Script for the getting post requests-->
<script>
function submitForms() {
    document.getElementById("form0").submit();
    //document.getElementById("form 08").submit();
    //document.getElementById("form 09").submit();
    //document.getElementById("form 10").submit();
    //document.getElementById("form 11").submit();
    //document.getElementById("form 12").submit();
    }
8
function post(path, params, method) {
    method = method || "post"; // Set method to post by default if not specified.

    // The rest of this code assumes you are not using a library.
    // It can be made less wordy if you use one.
    var form = document.createElement("form");
    form.setAttribute("method", method);
    form.setAttribute("action", path);

    for(var key in params) {
        if(params.hasOwnProperty(key)) {
            var hiddenField = document.createElement("input");
            hiddenField.setAttribute("type", "hidden");
            hiddenField.setAttribute("name", key);
            hiddenField.setAttribute("value", params[key]);

            form.appendChild(hiddenField);
        }
    }

    document.body.appendChild(form);
    form.submit();
}
</script>

<script type="text/javascript">
    $(document).ready(function () {

      $('input').keyup(function (e) {
        if (e.which == 39) { // right arrow
          $(this).closest('td').next().find('input').focus();

        } else if (e.which == 37) { // left arrow
          $(this).closest('td').prev().find('input').focus();

        } else if (e.which == 40) { // down arrow
          $(this).closest('tr').next().find('td:eq(' + $(this).closest('td').index() + ')').find('input').focus();

        } else if (e.which == 38) { // up arrow
          $(this).closest('tr').prev().find('td:eq(' + $(this).closest('td').index() + ')').find('input').focus();
        }
      });

    // un-comment to display key code
    // $("input").keydown(function (e) {
    //   console.log(e.which);
    // });
    });
</script>

<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>