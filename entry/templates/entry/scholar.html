{% extends 'data/base.html' %}
{% load staticfiles %}

{% block title %}Scholar (Direct){% endblock %}

{% block navbar %}
    {% include 'data/navbar.html' %}
{% endblock %}

{% block stylesheet %}
    <link rel="stylesheet" href="{% static 'css/entry_styles.css' %}">
{% endblock %}

{% block content%}
    <body>
        <h2>Direct Entry (Scholar)</h2>
        <h4>Single entry</h4>
            <form action="" method="post">
                    <fieldset>
                        Student Number: <input class="student-number" type='number' name="student-number" value="">
                        Term 1 Percentage: <input class="t1" type='number' id="t1" name="t1" value="" style="width: 40px">
                        Term 2 Percentage: <input class="t2" type="number" id="t2" name="t2" value="" style="width: 40px">
                        . . . . .
                        Name: <a id="name" class="name">TYPE IN STUDENT NUMBER</a>
                    </fieldset>
            </form>

        <button>Import Scholarship Scores</button><br>
    </body>
{% endblock %}
{% block javascript %}
    <script>
        $(".student-number").keyup(function () {
           const student_id = this.value;
           $.ajax({
               url: '{% url "entry:validate_student_name" %}',
               data: {
                   'student_id': student_id
               },
               dataType: 'json',
               success: function (data) {
                       document.getElementById('name').innerHTML=data.student_name;
                       $('input[name=t1]').val(data.t1);
                       $('input[name=t2]').val(data.t2);
               }
           });
        });
    </script>
{% endblock %}